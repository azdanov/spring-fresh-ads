<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <title>listing</title>
</head>
<body>
<!--/*@thymesVar id="listing" type="org.js.azdanov.springfresh.dtos.ListingDTO"*/-->
<th:block th:fragment="default(listing)" th:with="url=${#httpServletRequest.requestURI}">
  <h5>
    <a class="text-decoration-none link-secondary"
       th:href="@{{url}/{id}(url=${url}, id=${listing.id})}"
       th:text="|${listing.title} #{in} ${listing.area.name}|">
    </a>
  </h5>
  <ul class="list-inline">
    <li class="list-inline-item"
        th:text="${#temporals.format(listing.createdAt, 'dd/MM/yyyy HH:mm')}">Created
    </li>
    <li class="list-inline-item"
        th:text="${listing.user.name}">User
    </li>
  </ul>
</th:block>

<!--/*@thymesVar id="favoriteListing" type="org.js.azdanov.springfresh.dtos.FavoriteListingDTO"*/-->
<th:block th:fragment="favorite(favoriteListing)" th:with="listing=${favoriteListing.listing}">
  <h5>
    <a class="text-decoration-none link-secondary"
       th:href="@{/{area}/categories/{category}/listings/{id}(area=${listing.area.slug}, category=${listing.category.slug}, id=${listing.id})}"
       th:text="|${listing.title} #{in} ${listing.area.name}|">
    </a>
  </h5>
  <ul class="list-inline mb-1">
    <li class="list-inline-item"
        th:text="|#{created} ${#temporals.format(listing.createdAt, 'dd/MM/yyyy HH:mm')}|">Created
    </li>
    <li class="list-inline-item"
        th:text="${listing.user.name}">User
    </li>
  </ul>
  <ul class="list-inline">
    <li class="list-inline-item"
        th:text="|#{added} ${#temporals.format(favoriteListing.createdAt, 'dd/MM/yyyy HH:mm')}|">Added
    </li>
    <li class="list-inline-item">
      <a class="text-decoration-none"
         th:href="@{/listings/{listingId}/favorites(listingId=${listing.id})}"
         th:onclick="'event.preventDefault(); document.getElementById(\'listing-unfavorite-form-' + ${listing.id} + '\').submit();'"
         th:text="#{listing.remove-from-favorites}">
        Remove from favorites</a>
      <form class="d-none" th:action="@{/listings/{listingId}/favorites(listingId=${listing.id})}"
            th:id="'listing-unfavorite-form-' + ${listing.id}"
            th:method="DELETE"></form>
    </li>
  </ul>
</th:block>

</body>
</html>
